<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/subjects"></ion-back-button>
    </ion-buttons>
    <ion-title *ngIf="lang.isSpanish()">Editar paciente: {{identifier}}</ion-title>
    <ion-title *ngIf="!lang.isSpanish()">Edit patient: {{identifier}}</ion-title>
    <ion-button slot="primary" [routerLink]="['/subjects/diseases/'+ id]" expand="block" shape="round"
      class="ion-margin-end">
      <ion-icon slot="start" name="medical"></ion-icon>
      Enfermedades/condiciones asociadas
    </ion-button>
    <ion-button slot="primary" [routerLink]="['/subjects/documents/'+ id]" expand="block" shape="round"
      class="ion-margin-end">
      <ion-icon slot="start" name="document"></ion-icon>
      Documentos
    </ion-button>
    <ion-buttons slot="end">
      <ion-button (click)="delete()" *ngIf="userData?.isOwner || userData?.isAdmin"
        [disabled]="!userData?.isAdmin || userData?.id !== subject?.mainDoctor" color="danger">
        <ion-icon slot="start" name="trash"></ion-icon>
        <ion-label class="ion-hide-sm-down" *ngIf="lang.isSpanish()">Eliminar</ion-label>
        <ion-label class="ion-hide-sm-down" *ngIf="!lang.isSpanish()">Delete</ion-label>
      </ion-button>
      <ion-button [routerLink]="['/subjects/share', id]"
        [disabled]="!userData?.isAdmin || userData?.id !== subject?.mainDoctor">
        <ion-icon slot="start" name="share"></ion-icon>
        <ion-label class="ion-hide-sm-down" *ngIf="lang.isSpanish()">Compartir</ion-label>
        <ion-label class="ion-hide-sm-down" *ngIf="!lang.isSpanish()">Share</ion-label>
      </ion-button>
      <ion-button [routerLink]="['/subjects/import', id]"
        [disabled]="!userData?.isAdmin || userData?.id !== subject?.mainDoctor">
        <ion-icon slot="start" name="cloud-upload"></ion-icon>
        <ion-label class="ion-hide-sm-down" *ngIf="lang.isSpanish()">Importar</ion-label>
        <ion-label class="ion-hide-sm-down" *ngIf="!lang.isSpanish()">Import</ion-label>
      </ion-button>
      <ion-button (click)="save()" color="success">
        <ion-icon slot="start" name="save"></ion-icon>
        <ion-label class="ion-hide-sm-down" *ngIf="lang.isSpanish()">Guardar</ion-label>
        <ion-label class="ion-hide-sm-down" *ngIf="!lang.isSpanish()">Save</ion-label>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  <!-- Botones tipo segment -->
  <ion-segment (ionChange)="segmentChanged($event)" scrollable style="background-color: white;">
    <ion-segment-button value="phenotypic-data" layout="icon-start" [disabled]="phenotypicAccess">
      <ion-icon name="body"></ion-icon>
      <ion-label class="ion-hide-sm-down" *ngIf="lang.isSpanish()">Datos fenotípicos</ion-label>
      <ion-label class="ion-hide-sm-down" *ngIf="!lang.isSpanish()">Phenotypic data</ion-label>
    </ion-segment-button>
    <ion-segment-button value="genetic-study" layout="icon-start" [disabled]="geneticAccess">
      <ion-icon name="finger-print"></ion-icon>
      <ion-label class="ion-hide-sm-down" *ngIf="lang.isSpanish()">Estudio genético</ion-label>
      <ion-label class="ion-hide-sm-down" *ngIf="!lang.isSpanish()">Genetic study</ion-label>
    </ion-segment-button>
    <ion-segment-button value="epigenetic-study" layout="icon-start" [disabled]="reproductionAccess">
      <ion-icon name="male-female"></ion-icon>
      <ion-label class="ion-hide-sm-down" *ngIf="lang.isSpanish()">Técnicas de reproducción asistida</ion-label>
      <ion-label class="ion-hide-sm-down" *ngIf="!lang.isSpanish()">Assisted Reproduction Techniques</ion-label>
    </ion-segment-button>
    <ion-segment-button value="analytic-study" layout="icon-start" [disabled]="analysisAccess">
      <ion-icon name="eyedrop"></ion-icon>
      <ion-label class="ion-hide-sm-down" *ngIf="lang.isSpanish()">Estudio analítico</ion-label>
      <ion-label class="ion-hide-sm-down" *ngIf="!lang.isSpanish()">Analytic study</ion-label>
    </ion-segment-button>
    <ion-segment-button value="image-study" layout="icon-start" [disabled]="imageAccess">
      <ion-icon name="images"></ion-icon>
      <ion-label class="ion-hide-sm-down" *ngIf="lang.isSpanish()">Estudio de imagen</ion-label>
      <ion-label class="ion-hide-sm-down" *ngIf="!lang.isSpanish()">Image study</ion-label>
    </ion-segment-button>
  </ion-segment>

</ion-header>

<ion-content>
  <ion-grid [ngSwitch]="segment.value">
    <!-- DATOS FENOTÍPICOS -->
    <ng-container *ngIf="!phenotypicAccess">
      <ion-row *ngSwitchCase="'phenotypic-data'" class="ion-padding-bottom">
        <ng-container *ngIf="subject; else elsePhenotypic">
          <ion-col size="12" class="ion-padding-top">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Identificador</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Identifier</ion-label>
              <ion-input type="text" placeholder="Introduzca un identificador" [(ngModel)]="identifier">
              </ion-input>
            </ion-item>
          </ion-col>
          <!-- DATOS BIOMÉTRICOS -->
          <ion-col size="12" class="ion-padding-top">
            <ion-item lines="none" color="primary">
              <ion-label *ngIf="lang.isSpanish()">DATOS BIOMÉTRICOS</ion-label>
              <ion-label *ngIf="!lang.isSpanish()">BIOMETRIC DATA</ion-label>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Sexo</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Genre</ion-label>
              <ion-select [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="genre">
                <ion-select-option value="varon" *ngIf="lang.isSpanish()">Varón</ion-select-option>
                <ion-select-option value="hembra" *ngIf="lang.isSpanish()">Hembra</ion-select-option>
                <ion-select-option value="intersexo" *ngIf="lang.isSpanish()">Intersexo</ion-select-option>
                <ion-select-option value="none" *ngIf="lang.isSpanish()">Sin especificar</ion-select-option>
                <ion-select-option value="varon" *ngIf="!lang.isSpanish()">Male</ion-select-option>
                <ion-select-option value="hembra" *ngIf="!lang.isSpanish()">Female</ion-select-option>
                <ion-select-option value="intersexo" *ngIf="!lang.isSpanish()">Intersex</ion-select-option>
                <ion-select-option value="none" *ngIf="!lang.isSpanish()">Unknown</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Edad</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Age</ion-label>
              <ion-input type="number" [placeholder]="lang.isSpanish()?'Introduzca edad':'Enter age'" [(ngModel)]="age">
              </ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Fecha de nacimiento</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Birth date</ion-label>
              <ion-datetime [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" display-format="DD/MM/YYYY"
                [(ngModel)]="birthDate">
              </ion-datetime>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Estatura (cm)</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Height (cm)</ion-label>
              <ion-input [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" type="number" [(ngModel)]="height">
              </ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Peso (kg)</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Weight (kg)</ion-label>
              <ion-input [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" type="number" [(ngModel)]="weight">
              </ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Grupo de población</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Population group</ion-label>
              <ion-select [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="populationGroup">
                <ion-select-option value="subsahariano" *ngIf="lang.isSpanish()">Subsahariano
                </ion-select-option>
                <ion-select-option value="africano" *ngIf="lang.isSpanish()">Norteafricano</ion-select-option>
                <ion-select-option value="indioasiatico" *ngIf="lang.isSpanish()">Indioasiático
                </ion-select-option>
                <ion-select-option value="caucasico" *ngIf="lang.isSpanish()">Caucásico</ion-select-option>
                <ion-select-option value="chino" *ngIf="lang.isSpanish()">Chino</ion-select-option>
                <ion-select-option value="japones" *ngIf="lang.isSpanish()">Japonés</ion-select-option>
                <ion-select-option value="sudesteasiatico" *ngIf="lang.isSpanish()">Sudeste asiático
                </ion-select-option>
                <ion-select-option value="otrosgruposasiaticos" *ngIf="lang.isSpanish()">Otros grupos asiáticos
                </ion-select-option>
                <ion-select-option value="aborigendeaustralia" *ngIf="lang.isSpanish()">Aborígen de Australia
                </ion-select-option>
                <ion-select-option value="islasdelpacificoypolinesia" *ngIf="lang.isSpanish()">Islas del Pacífico y
                  Polinesia
                </ion-select-option>
                <ion-select-option value="amerindio" *ngIf="!lang.isSpanish()">Amerindian</ion-select-option>
                <ion-select-option value="latinohispano" *ngIf="!lang.isSpanish()">Latin or hispanic
                </ion-select-option>
                <ion-select-option value="subsahariano" *ngIf="!lang.isSpanish()">Sub-saharan
                </ion-select-option>
                <ion-select-option value="africano" *ngIf="!lang.isSpanish()">North african
                </ion-select-option>
                <ion-select-option value="indioasiatico" *ngIf="!lang.isSpanish()">Indoasian
                </ion-select-option>
                <ion-select-option value="caucasico" *ngIf="!lang.isSpanish()">Caucasian</ion-select-option>
                <ion-select-option value="chino" *ngIf="!lang.isSpanish()">Chinese</ion-select-option>
                <ion-select-option value="japones" *ngIf="!lang.isSpanish()">Japanese</ion-select-option>
                <ion-select-option value="sudesteasiatico" *ngIf="!lang.isSpanish()">Southeast Asian
                </ion-select-option>
                <ion-select-option value="otrosgruposasiaticos" *ngIf="!lang.isSpanish()">Other asian groups
                </ion-select-option>
                <ion-select-option value="aborigendeaustralia" *ngIf="!lang.isSpanish()">Australian aboriginal
                </ion-select-option>
                <ion-select-option value="islasdelpacificoypolinesia" *ngIf="!lang.isSpanish()">Pacific Islands and
                  Polynesia
                </ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Tono de piel</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Skin tone</ion-label>
              <ion-select [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="skin">
                <ion-select-option value="albina" *ngIf="lang.isSpanish()">Albina</ion-select-option>
                <ion-select-option value="blanca" *ngIf="lang.isSpanish()">Blanca</ion-select-option>
                <ion-select-option value="morena" *ngIf="lang.isSpanish()">Morena</ion-select-option>
                <ion-select-option value="negra" *ngIf="lang.isSpanish()">Negra</ion-select-option>
                <ion-select-option value="albina" *ngIf="!lang.isSpanish()">Albino</ion-select-option>
                <ion-select-option value="blanca" *ngIf="!lang.isSpanish()">White</ion-select-option>
                <ion-select-option value="morena" *ngIf="!lang.isSpanish()">Brunette</ion-select-option>
                <ion-select-option value="negra" *ngIf="!lang.isSpanish()">Black</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Grupo sanguíneo</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Blood type</ion-label>
              <ion-select [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="bloodType">
                <ion-select-option value="a" *ngIf="lang.isSpanish()">A</ion-select-option>
                <ion-select-option value="b" *ngIf="lang.isSpanish()">B</ion-select-option>
                <ion-select-option value="ab" *ngIf="lang.isSpanish()">AB</ion-select-option>
                <ion-select-option value="cero" *ngIf="lang.isSpanish()">0</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">RH</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">RH</ion-label>
              <ion-select [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="rh">
                <ion-select-option value="positivo" *ngIf="lang.isSpanish()">Positivo</ion-select-option>
                <ion-select-option value="negativo" *ngIf="lang.isSpanish()">Negativo</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Color de cabello</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Hair color</ion-label>
              <ion-select [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="hair">
                <ion-select-option value="moreno" *ngIf="lang.isSpanish()">Moreno</ion-select-option>
                <ion-select-option value="marron" *ngIf="lang.isSpanish()">Castaño</ion-select-option>
                <ion-select-option value="rubio" *ngIf="lang.isSpanish()">Rubio</ion-select-option>
                <ion-select-option value="pelirrojo" *ngIf="lang.isSpanish()">Pelirrojo</ion-select-option>
                <ion-select-option value="moreno" *ngIf="!lang.isSpanish()">Black</ion-select-option>
                <ion-select-option value="marron" *ngIf="!lang.isSpanish()">Brown</ion-select-option>
                <ion-select-option value="rubio" *ngIf="!lang.isSpanish()">Blonde</ion-select-option>
                <ion-select-option value="pelirrojo" *ngIf="!lang.isSpanish()">Ginger</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Color de los ojos</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Eye color</ion-label>
              <ion-select [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="eyes">
                <ion-select-option value="marrones" *ngIf="lang.isSpanish()">Marrones</ion-select-option>
                <ion-select-option value="verdes" *ngIf="lang.isSpanish()">Verdes</ion-select-option>
                <ion-select-option value="azules" *ngIf="lang.isSpanish()">Azules</ion-select-option>
                <ion-select-option value="marrones" *ngIf="!lang.isSpanish()">Brown</ion-select-option>
                <ion-select-option value="verdes" *ngIf="!lang.isSpanish()">Green</ion-select-option>
                <ion-select-option value="azules" *ngIf="!lang.isSpanish()">Blue</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">IMC</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">BMI</ion-label>
              <ion-input [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" type="number" [(ngModel)]="imc">
              </ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">% grasa visceral androide</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">% android visceral fat</ion-label>
              <ion-input type="number" [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="androidFat">
              </ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="3">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Presión arterial mayor</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Higher blood pressure</ion-label>
              <ion-input type="number" [placeholder]="lang.isSpanish()?'Mayor':'Higher'"
                [(ngModel)]="highBloodPressure"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="3">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Presión arterial menor</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Lower blood pressure</ion-label>
              <ion-input type="number" [placeholder]="lang.isSpanish()?'Menor':'Lower'" [(ngModel)]="lowBloodPressure">
              </ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Alergias</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Alergias</ion-label>
              <ion-input type="text" [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="alergies">
              </ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Intolerancias alimenticias</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Food intolerances</ion-label>
              <ion-input type="text" [placeholder]="lang.isSpanish()?'Seleccionar':'Select'"
                [(ngModel)]="foodIntolerance"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Transtornos intestinales</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Intestinal disorders</ion-label>
              <ion-input type="text" [placeholder]="lang.isSpanish()?'Seleccionar':'Select'"
                [(ngModel)]="intestinalDisorders"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Hijos</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Children</ion-label>
              <ion-input type="number" [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="children">
              </ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6" *ngIf="genre==='hembra'">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Edad menarquía</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Menarche age</ion-label>
              <ion-input type="number" [placeholder]="lang.isSpanish()?'Seleccionar':'Select'"
                [(ngModel)]="menarcheAge"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6" *ngIf="genre==='hembra'">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Edad menopausia</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Menopausal age</ion-label>
              <ion-input type="number" [placeholder]="lang.isSpanish()?'Seleccionar':'Select'"
                [(ngModel)]="menopausalAge"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6" *ngIf="genre==='hembra'">
            <ion-item lines="none">
              <ion-label *ngIf="lang.isSpanish()">Síndrome de Ovario Poliquístico</ion-label>
              <ion-label *ngIf="!lang.isSpanish()">Polycystic ovary syndrome</ion-label>
              <ion-checkbox [(ngModel)]="sop"></ion-checkbox>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6" *ngIf="genre==='hembra'">
            <ion-item lines="none">
              <ion-label>Manchado vaginal >50 años</ion-label>
              <ion-label>Vaginal spotting >50 years</ion-label>
              <ion-checkbox [(ngModel)]="vaginalSpotting"></ion-checkbox>
            </ion-item>
          </ion-col>
          <!-- HÁBITOS DE VIDA -->
          <ion-col size="12" class="ion-margin-top">
            <ion-item lines="none" color="primary">
              <ion-label *ngIf="lang.isSpanish()">HÁBITOS DE VIDA</ion-label>
              <ion-label *ngIf="!lang.isSpanish()">LIFE HABITS</ion-label>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label *ngIf="lang.isSpanish()" position="floating">Tabaco</ion-label>
              <ion-label *ngIf="!lang.isSpanish()" position="floating">Tobacco</ion-label>
              <ion-select [(ngModel)]="smoker" [placeholder]="lang.isSpanish()?'Seleccionar':'Select'">
                <ion-select-option value="habitual" *ngIf="lang.isSpanish()">Habitual</ion-select-option>
                <ion-select-option value="ocasional" *ngIf="lang.isSpanish()">Ocasional</ion-select-option>
                <ion-select-option value="no" *ngIf="lang.isSpanish()">No fumador</ion-select-option>
                <ion-select-option value="habitual" *ngIf="!lang.isSpanish()">Habitual</ion-select-option>
                <ion-select-option value="ocasional" *ngIf="!lang.isSpanish()">Occasional</ion-select-option>
                <ion-select-option value="no" *ngIf="!lang.isSpanish()">Non smoker</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating">Alcohol</ion-label>
              <ion-select [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="alcohol">
                <ion-select-option value="habitual" *ngIf="lang.isSpanish()">Habitual</ion-select-option>
                <ion-select-option value="habitual" *ngIf="!lang.isSpanish()">Habitual</ion-select-option>
                <ion-select-option value="ocasional" *ngIf="lang.isSpanish()">Ocasional</ion-select-option>
                <ion-select-option value="ocasional" *ngIf="!lang.isSpanish()">Occasional</ion-select-option>
                <ion-select-option value="abstemio" *ngIf="lang.isSpanish()">Abstemio</ion-select-option>
                <ion-select-option value="abstemio" *ngIf="!lang.isSpanish()">Teetotaler</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Otras drogas</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Other drugs</ion-label>
              <ion-select [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="otherDrugs">
                <ion-select-option value="habitual" *ngIf="lang.isSpanish()">Habitual</ion-select-option>
                <ion-select-option value="ocasional" *ngIf="lang.isSpanish()">Ocasional</ion-select-option>
                <ion-select-option value="no" *ngIf="lang.isSpanish()">No consumidor</ion-select-option>
                <ion-select-option value="habitual" *ngIf="!lang.isSpanish()">Habitual</ion-select-option>
                <ion-select-option value="ocasional" *ngIf="!lang.isSpanish()">Occasional</ion-select-option>
                <ion-select-option value="no" *ngIf="!lang.isSpanish()">Non consumer</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label *ngIf="lang.isSpanish()">Medicamentos</ion-label>
              <ion-label *ngIf="!lang.isSpanish()">Medicines</ion-label>
              <ion-checkbox [(ngModel)]="medicines"></ion-checkbox>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Exposición solar</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Solar exposition</ion-label>
              <ion-select [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="solarExposition">
                <ion-select-option value="habitual" *ngIf="lang.isSpanish()">Habitual</ion-select-option>
                <ion-select-option value="ocasional" *ngIf="lang.isSpanish()">Ocasional</ion-select-option>
                <ion-select-option value="no" *ngIf="lang.isSpanish()">Ninguna</ion-select-option>
                <ion-select-option value="habitual" *ngIf="!lang.isSpanish()">Habitual</ion-select-option>
                <ion-select-option value="ocasional" *ngIf="!lang.isSpanish()">Occasional</ion-select-option>
                <ion-select-option value="no" *ngIf="!lang.isSpanish()">None</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Exposición laboral</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Work exposition</ion-label>
              <ion-select [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="workExposition">
                <ion-select-option value="habitual" *ngIf="lang.isSpanish()">Habitual</ion-select-option>
                <ion-select-option value="ocasional" *ngIf="lang.isSpanish()">Ocasional</ion-select-option>
                <ion-select-option value="no" *ngIf="lang.isSpanish()">Ninguna</ion-select-option>
                <ion-select-option value="habitual" *ngIf="!lang.isSpanish()">Habitual</ion-select-option>
                <ion-select-option value="ocasional" *ngIf="!lang.isSpanish()">Occasional</ion-select-option>
                <ion-select-option value="no" *ngIf="!lang.isSpanish()">None</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Actividad física semanal</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Weekly physical activity</ion-label>
              <ion-select [placeholder]="lang.isSpanish()?'Seleccionar':'Select'" [(ngModel)]="physicalActivity">
                <ion-select-option value="diario" *ngIf="lang.isSpanish()">Todos los días</ion-select-option>
                <ion-select-option value="moderado" *ngIf="lang.isSpanish()">3 a 5 días</ion-select-option>
                <ion-select-option value="ligero" *ngIf="lang.isSpanish()">1 a 3 días</ion-select-option>
                <ion-select-option value="no" *ngIf="lang.isSpanish()">Ninguna</ion-select-option>
                <ion-select-option value="diario" *ngIf="!lang.isSpanish()">Everyday</ion-select-option>
                <ion-select-option value="moderado" *ngIf="!lang.isSpanish()">3 to 5 days</ion-select-option>
                <ion-select-option value="ligero" *ngIf="!lang.isSpanish()">1 to 3 days</ion-select-option>
                <ion-select-option value="no" *ngIf="!lang.isSpanish()">None</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <!-- SIGNOS Y SÍNTOMAS -->
          <ion-col size="12" class="ion-margin-top">
            <ion-item lines="none" color="primary">
              <ion-label *ngIf="lang.isSpanish()">SIGNOS Y SÍNTOMAS</ion-label>
              <ion-label *ngIf="!lang.isSpanish()">SIGNS AND SYMPTOMS</ion-label>
            </ion-item>
          </ion-col>
          <ion-col size="12">
            <ng-container *ngIf="currentSignsAndSymptoms.length>0">
              <ion-chip color="primary" mode="ios" *ngFor="let sign of currentSignsAndSymptoms; let i = index"
                class="ion-margin-bottom">
                <ion-label>{{sign.name}} <span *ngIf="sign.accessionNumber">(AN: {{sign.accessionNumber}}) </span> <span
                    *ngIf="sign.date">(Fecha: {{sign.date | date: 'd/M/yy' }})</span></ion-label>
                <ion-icon name="close" (click)="deleteSignAndSymptoms(i)"></ion-icon>
              </ion-chip>
            </ng-container>
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Signos y síntomas</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Signs and symptoms</ion-label>
              <ion-input type="text"
                [placeholder]="lang.isSpanish()?'Introduzca signos o síntomas y seleccione':'Enter one by one signs or symptoms and select properly'"
                (ionChange)="onQuerySignsAndSymptoms($event.target.value)" [(ngModel)]="querySignsAndSymptoms">
              </ion-input>
            </ion-item>
            <ng-container *ngIf="querySignsAndSymptoms">
              <ion-item *ngFor="let item of querySignsAndSymptomsList" (click)="addSignAndSymptom(item)" button
                lines="full">
                <ion-label>{{item.name}}</ion-label>
              </ion-item>
            </ng-container>
            <ng-container *ngFor="let sign of currentSignsAndSymptoms; let j = index">
              <ion-item class="ion-margin-top">
                <ion-label position="floating">Accession number para: {{sign.name}}</ion-label>
                <ion-input type="number" placeholder="Accession number" [(ngModel)]="sign.accessionNumber"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Fecha del síntoma: {{sign.name}} </ion-label>
                <ion-datetime display-format="DD/MM/YYYY" [(ngModel)]="sign.date"></ion-datetime>
              </ion-item>
            </ng-container>
          </ion-col>
          <!-- GENES -->
          <ion-col size="12" class="ion-margin-top">
            <ion-item lines="none" color="primary">
              <ion-label>MUTACIONES EN GENES</ion-label>
            </ion-item>
          </ion-col>
          <ion-col size="12">
            <ng-container *ngIf="currentGenes.length>0">
              <ion-chip color="primary" mode="ios" *ngFor="let gene of currentGenes; let i = index"
                class="ion-margin-bottom">
                <ion-label>{{gene.name}}</ion-label>
                <ion-icon name="close" (click)="deleteGene(i)"></ion-icon>
              </ion-chip>
            </ng-container>
            <ion-item lines="none">
              <ion-label position="floating">Genes</ion-label>
              <ion-input type="text"
                [placeholder]="lang.isSpanish()?'Introduzca genes y seleccione':'Enter one by one genes and select properly'"
                (ionChange)="onQueryGenes($event.target.value)" [(ngModel)]="queryGenes" debounce="500">
              </ion-input>
            </ion-item>
            <ng-container *ngIf="queryGenes">
              <ion-item *ngFor="let gene of queryGenesList" (click)="addGene(gene)" button lines="full">
                <ion-label>{{gene.entrezGeneSymbol}}</ion-label>
              </ion-item>
            </ng-container>
          </ion-col>
          <!-- ENFERMEDADES CONFIRMADAS -->
          <ion-col size="12" class="ion-margin-top">
            <ion-item lines="none" color="primary">
              <ion-label *ngIf="lang.isSpanish()">ENFERMEDADES CONFIRMADAS</ion-label>
              <ion-label *ngIf="!lang.isSpanish()">CONFIRMED DISEASES</ion-label>
            </ion-item>
          </ion-col>
          <ion-col size="12">
            <ng-container *ngIf="currentDiseases.length>0">
              <ion-chip color="primary" mode="ios" *ngFor="let disease of currentDiseases; let i = index"
                class="ion-margin-bottom">
                <ion-label>{{disease.name}}</ion-label>
                <ion-icon name="close" (click)="deleteDisease(i)"></ion-icon>
              </ion-chip>
            </ng-container>
            <ion-item lines="none">
              <ion-label position="floating" *ngIf="lang.isSpanish()">Enfermedades</ion-label>
              <ion-label position="floating" *ngIf="!lang.isSpanish()">Enferemdades</ion-label>
              <ion-input type="text"
                [placeholder]="lang.isSpanish()?'Introduzca enfermedades y seleccione el que sea conveniente':'Enter diseases and select properly'"
                [(ngModel)]="queryDisease" (ionChange)="onDiseaseQueryChange($event.detail.value)"></ion-input>
            </ion-item>
            <ng-container *ngIf="queryDisease">
              <ion-item *ngFor="let diseaseItem of queryDiseaseList;" (click)="addDisease(diseaseItem)" button
                lines="full">
                <ion-label>{{diseaseItem.name}}</ion-label>
              </ion-item>
            </ng-container>
          </ion-col>
          <!-- ANTECENDENTES -->
          <ion-col size="12" class="ion-margin-top">
            <ion-item lines="none" color="primary">
              <ion-label *ngIf="lang.isSpanish()">ANTECEDENTES </ion-label>
              <ion-label *ngIf="!lang.isSpanish()">HISTORY</ion-label>
              <ion-buttons slot="end">
                <ion-button [routerLink]="['/subjects/familiars', id]" expand="full">
                  <ion-icon slot="start" name="people-circle"></ion-icon>
                  <ion-label *ngIf="lang.isSpanish()">Ver antecedentes familiares</ion-label>
                  <ion-label *ngIf="!lang.isSpanish()">Show family history</ion-label>
                </ion-button>
              </ion-buttons>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label *ngIf="lang.isSpanish()">Cáncer</ion-label>
              <ion-label *ngIf="!lang.isSpanish()">Cancer</ion-label>
              <ion-checkbox [(ngModel)]="cancer"></ion-checkbox>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label *ngIf="lang.isSpanish()">Neurodegenerativos</ion-label>
              <ion-label *ngIf="!lang.isSpanish()">Neurodegeneratives</ion-label>
              <ion-checkbox [(ngModel)]="neurodegeneratives"></ion-checkbox>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label *ngIf="lang.isSpanish()">Autoinmunes</ion-label>
              <ion-label *ngIf="!lang.isSpanish()">Autoimmunes</ion-label>
              <ion-checkbox [(ngModel)]="autoinmunes"></ion-checkbox>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label *ngIf="lang.isSpanish()">Enfermedad cardiovascular</ion-label>
              <ion-label *ngIf="!lang.isSpanish()">Cardio disease</ion-label>
              <ion-checkbox [(ngModel)]="cardioDisease"></ion-checkbox>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6">
            <ion-item lines="none">
              <ion-label *ngIf="lang.isSpanish()">Infertilidad</ion-label>
              <ion-label *ngIf="!lang.isSpanish()">Infertility</ion-label>
              <ion-checkbox [(ngModel)]="infertility"></ion-checkbox>
            </ion-item>
          </ion-col>
          <!-- OTROS ANTECEDENTES -->
          <ion-col size="12" class="ion-margin-top">
            <ion-item lines="none" color="primary">
              <ion-label *ngIf="lang.isSpanish()">OTROS ANTECEDENTES</ion-label>
              <ion-label *ngIf="!lang.isSpanish()">OTHER BACKGROUND</ion-label>
            </ion-item>
          </ion-col>
          <ion-col size="12">
            <ion-item lines="none">
              <ion-textarea rows="4" [(ngModel)]="otherBackground" placeholder="Introduzca enfermedades">
              </ion-textarea>
            </ion-item>
          </ion-col>
          <ion-col size="12" class="ion-margin-top">
            <ion-item lines="none" color="primary">
              <ion-label *ngIf="lang.isSpanish()">TRATAMIENTO ACTUAL</ion-label>
              <ion-label *ngIf="!lang.isSpanish()">CURRENT TREATMENT</ion-label>
            </ion-item>
          </ion-col>
          <ion-col size="12">
            <ion-item lines="none">
              <ion-textarea rows="4" [(ngModel)]="currentTreatment" placeholder="Introduzca tratamiento">
              </ion-textarea>
            </ion-item>
          </ion-col>
        </ng-container>
        <ng-template #elsePhenotypic>
          <ion-col size="12" class="ion-padding-top">
            <ion-item lines="none">
              <ion-label>
                <ion-skeleton-text width="80%"></ion-skeleton-text>
              </ion-label>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-lg="6" class="ion-padding-top" *ngFor="let i of skeletonData">
            <ion-item lines="none">
              <ion-label>
                <ion-skeleton-text width="80%"></ion-skeleton-text>
              </ion-label>
            </ion-item>
          </ion-col>
        </ng-template>
      </ion-row>
    </ng-container>
    <!-- FIN DE DATOS FENOTÍPICOS -->

    <!-- ESTUDIO GENÉTICO -->
    <!-- 
    <div *ngSwitchCase="'genetic-study'">
      <ng-container *ngIf="!geneticAccess">
        <ion-row>
          <ion-col size="12" *ngIf="subject.geneticDataFileName">
            Nombre de archivo importado: {{subject?.geneticDataFileName}}
          </ion-col>
          <ion-col size="12" *ngIf="mutations">
            <ion-text color="primary">
              <h5 *ngIf="lang.isSpanish()">Mutaciones encontradas:</h5>
              <h5 *ngIf="!lang.isSpanish()">Mutations found:</h5>
            </ion-text>
          </ion-col>
          <ion-col size="12" size-lg="4" *ngFor="let mutation of mutations">
            <ion-item lines="full">
              <ion-label>{{mutation.geneticVariant}}</ion-label>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12" *ngIf="geneticStudy?.length>0">
            <ion-text color="primary">
              <h5 *ngIf="lang.isSpanish()">
                Polimorfismos del paciente: {{ numberOfVariants }}
              </h5>
              <h5 *ngIf="!lang.isSpanish()">
                Subject's polymorphisms: {{ numberOfVariants }}
              </h5>
            </ion-text>
          </ion-col>
          <ion-col size="12">
            <ion-item *ngFor="let geneticVariant of geneticStudy" lines="full">
              <ion-label>{{ geneticVariant.geneticVariant }}</ion-label>
              <ion-chip *ngIf="geneticVariant.frequency !== null && geneticVariant.frequency > 0" slot="end"
                color="primary">Freq: {{geneticVariant.frequency || 0}}
              </ion-chip>
              <ion-chip *ngIf="geneticVariant.frequency !== null && geneticVariant.magnitude > 0" slot="end"
                color="primary">Magn: {{geneticVariant.magnitude || 0}}
              </ion-chip>
              <ion-chip slot="end" color="primary" *ngIf="geneticVariant?.alleles">
                ({{geneticVariant.alleles.father ||
                "-"}},{{geneticVariant.alleles.mother || "-"}})
              </ion-chip>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-infinite-scroll threshold="25%" (ionInfinite)="loadGeneticMore($event)">
          <ion-infinite-scroll-content loadingSpinner="crescent" loadingText="Cargando...">
          </ion-infinite-scroll-content>
        </ion-infinite-scroll>
      </ng-container>
    </div>
    -->
    <div *ngSwitchCase="'genetic-study'">
      <ng-container *ngIf="!geneticAccess">
        <ion-row>
          <ion-col size="12">
            <!-- AG GRID -->
            <ag-grid-angular *ngIf="!geneticStudy" style="width: 100%; height: 100%" class="ag-theme-alpine"
              [rowData]="geneticStudy" [columnDefs]="columnDefs" [defaultColDef]="defaultColDef" [pagination]="true"
              [rowHeight]="43" [paginationPageSize]="15" (gridReady)="onGridReady($event)">
            </ag-grid-angular>
            <ag-grid-angular *ngIf="geneticStudy" style="width: 100%;" class="ag-theme-alpine" [rowData]="geneticStudy"
              [columnDefs]="columnDefs" [defaultColDef]="defaultColDef" [pagination]="true" [rowHeight]="43"
              [paginationPageSize]="15" domLayout="autoHeight" (gridReady)="onGridReady($event)">
            </ag-grid-angular>
          </ion-col>
        </ion-row>
      </ng-container>
    </div>
    <!-- FIN DE ESTUDIO GENÉTICO -->

    <!-- TÉCNICAS DE REPRODUCCIÓN ASISTIDA -->
    <ng-container *ngIf="!reproductionAccess">
      <ion-row *ngSwitchCase="'epigenetic-study'" class="ion-padding-vertical">

        <!--  
          <ion-col size="5">
          </ion-col>
          <ion-col size="2" class="ion-margin-bottom">
            <ion-img src="assets/images/overture-logo-complete.png" style="max-width: 100px; margin-top: 1rem;"></ion-img>
          </ion-col>
          <ion-col size="5"></ion-col>
          -->

        <ion-col size="4">
          <ion-item>
            <ion-label position="floating">Iniciales del paciente</ion-label>
            <ion-input placeholder="Introduzca iniciales" [(ngModel)]="inicialesDelSujeto"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col size="4">
          <ion-item>
            <ion-label position="floating">ID paciente</ion-label>
            <ion-input placeholder="Introduzca ID" [(ngModel)]="actualpacsId"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col size="4">
          <ion-item>
            <ion-label position="floating">Clínica referente</ion-label>
            <ion-input placeholder="Introduzca clínica referente" [(ngModel)]="centroReferente"></ion-input>
          </ion-item>
        </ion-col>

        <!-- LISTADO DE EMBRIONES -->
        <ion-col size="12" class="ion-margin-vertical">
          <ion-item color="primary" lines="none">
            <ion-label style="font-size: 18px;">Listado de embriones</ion-label>
          </ion-item>
          <ng-container *ngFor="let embryo of embryos; let i = index">
            <ion-item *ngFor="let sample of embryo.samples; let j = index" lines="full">
              <ion-label>
                <p>
                  Sample Name: <b>{{sample['Sample Name']}}</b>
                </p>
                <p>
                  Sample ID: <b>{{sample["Sample ID"]}}</b>
                </p>
                <p>
                  Date: <b>{{embryo.date | date: 'd/M/yy' }}</b>
                </p>
                <p>
                  Filename: <b>{{embryo.fileName}}</b>
                </p>
              </ion-label>
              <ion-chip color="primary" mode="ios" outline="true">
                <ion-label>MEI: {{sample.MEI}}</ion-label>
              </ion-chip>
              <ion-chip color="primary" mode="ios" outline="true">
                <ion-label>MPI: {{sample.MPI}}</ion-label>
              </ion-chip>
              <ion-buttons slot="end">
                <ion-button (click)="deleteEmbryo(i,j)" color="danger">
                  <ion-icon slot="start" name="trash"></ion-icon>
                  Eliminar
                </ion-button>
                <ion-button (click)="showEmbryoDetails(i,j)">
                  <ion-icon slot="start" name="eye"></ion-icon>
                  Ver detalles
                </ion-button>
              </ion-buttons>
            </ion-item>
          </ng-container>
        </ion-col>

        <ion-col size="12">
          <ion-button (click)="showAddReproductionTest()" expand="full" color="secondary">
            <ion-icon slot="start" name="add"></ion-icon>
            <ion-label *ngIf="lang.isSpanish()">Crear prueba</ion-label>
            <ion-label *ngIf="!lang.isSpanish()">Create test</ion-label>
          </ion-button>
        </ion-col>

        <ion-col size="6">
          <ion-item>
            <ion-icon slot="start" name="folder" color="dark"></ion-icon>
            <ion-label>Filtrar por categorías</ion-label>
            <ion-input [(ngModel)]="queryCategory" (ionChange)="onCategoryChange($event.detail.value)"></ion-input>
          </ion-item>

          <ng-container *ngIf="queryCategory; else elseCategory">
            <ion-item *ngFor="let suggestedCategory of suggestedCategories" (click)="addCategory(suggestedCategory)"
              style="cursor: pointer;" lines="full">
              <ion-label>{{suggestedCategory.name}}</ion-label>
            </ion-item>
            <ion-item *ngIf="suggestedCategories.length === 0">
              <ion-label>¿No existe la categoría?</ion-label>
              <ion-button [routerLink]="['/database/categories/create']" color="primary">
                Crear
              </ion-button>
            </ion-item>
          </ng-container>
          <ng-template #elseCategory>

          </ng-template>

          <ng-container class="ion-padding-top">
            <ion-chip color="primary" mode="ios" outline="true"
              *ngFor="let category of selectedCategories; let i = index" (click)="removeCategory(i)">
              <ion-label>{{category.name}}</ion-label>
              <ion-icon name="close-circle"></ion-icon>
            </ion-chip>
          </ng-container>

        </ion-col>

        <ion-col size="6">

          <ion-item>
            <ion-icon slot="start" name="pricetags" color="dark"></ion-icon>
            <ion-label>Filtrar por etiquetas</ion-label>
            <ion-input [(ngModel)]="queryLabel" (ionChange)="onLabelChange($event.detail.value)"></ion-input>
          </ion-item>

          <ng-container *ngIf="queryLabel; else elseLabel">
            <ion-item *ngFor="let suggestedLabel of suggestedLabels" (click)="addLabel(suggestedLabel)"
              style="cursor: pointer;" lines="full">
              <ion-label>{{suggestedLabel.name}}</ion-label>
            </ion-item>
            <ion-item *ngIf="suggestedLabels.length === 0">
              <ion-label>¿No existe la etiqueta?</ion-label>
              <ion-button [routerLink]="['/database/labels/create']" color="primary">
                Crear
              </ion-button>
            </ion-item>
          </ng-container>
          <ng-template #elseLabel>

          </ng-template>

          <ng-container class="ion-padding-top">
            <ion-chip color="primary" mode="ios" outline="true" *ngFor="let label of selectedLabels; let i = index"
              (click)="removeLabel(i)">
              <ion-label>{{label.name}}</ion-label>
              <ion-icon name="close-circle"></ion-icon>
            </ion-chip>
          </ng-container>

        </ion-col>

        <!-- LISTADO DE PRUEBAS DE IMAGEN DE FERTILIDAD -->
        <ion-col size="12" class="ion-padding-top">
          <ion-reorder-group (ionItemReorder)="doReorder($event)" disabled="false">
            <ion-item lines="none" *ngFor="let reproductionTest of reproductionTests ; let i = index" lines="full"
              text-wrap>
              <ion-reorder slot="start" title="Arrastra para re-ordenar las pruebas"></ion-reorder>
              <ion-label class="ion-text-wrap" color="primary" text-wrap>
                <p style="font-size: 18px; margin-bottom: 0.5rem; font-weight: bold;">
                  {{ reproductionTest.name }}
                </p>
                <p style="font-size: 16px; margin-bottom: 0.5rem; color: black; ">Accession number:
                  {{reproductionTest.accessionNumber}}</p>
                <p style="margin-bottom: 1rem; color: black;">
                  Fecha de realización: {{ reproductionTest.date | date: 'dd/MM/yy' }}
                </p>
                <ng-container *ngFor="let element of reproductionTest.values">
                  <ion-chip color="danger" mode="ios" outline="true"
                    *ngIf="element.status && element.status === 'positive'">
                    <ion-label>
                      {{element.name}}: {{element.value}}{{element.metricUnit}}
                    </ion-label>
                  </ion-chip>
                </ng-container>
              </ion-label>
              <ion-buttons slot="end">
                <ion-button (click)="deleteReproductionTest(i)" color="danger">
                  <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Eliminar':'Delete'}}</ion-label>
                  <ion-icon slot="start" name="trash"></ion-icon>
                </ion-button>
                <ion-button (click)="openReports(reproductionTest)">
                  <ion-label class="ion-hide-sm-down">PDF</ion-label>
                  <ion-icon slot="start" name="document"></ion-icon>
                </ion-button>
                <ion-button (click)="showReproductionTest(reproductionTest.id)">
                  <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Editar':'Edit'}}</ion-label>
                  <ion-icon slot="start" name="create"></ion-icon>
                </ion-button>
              </ion-buttons>
              <!-- <ion-checkbox slot="end" [checked]="reproductionTest.isReproductionTest" (ionChange)="saveReproductionMark(i, $event.detail.checked)" color="success"></ion-checkbox> -->

            </ion-item>
          </ion-reorder-group>
        </ion-col>
      </ion-row>
    </ng-container>
    <!-- FIN DE TÉCNICAS DE REPRODUCCIÓN ASISTIDA -->

    <!-- ESTUDIO ANALÍTICO -->
    <ion-row *ngSwitchCase="'analytic-study'" class="ion-padding-top">
      <ng-container *ngIf="!analysisAccess">
        <ion-col size="12" class="ion-margin-bottom">
          <ion-button (click)="showAddAnalytic()" expand="full" color="secondary">
            <ion-icon slot="start" name="add"></ion-icon>
            <ion-label *ngIf="lang.isSpanish()">Crear estudio analítico</ion-label>
            <ion-label *ngIf="!lang.isSpanish()">Create analytic study</ion-label>
          </ion-button>
        </ion-col>

        <!-- FILTRADO DE ANÁLISIS CLÍNICOS -->
        <ion-col size="6">

          <ion-item>
            <ion-icon slot="start" name="folder" color="dark"></ion-icon>
            <ion-label>Filtrar por categorías</ion-label>
            <ion-input [(ngModel)]="queryCategory" (ionChange)="onCategoryChange($event.detail.value)"></ion-input>
          </ion-item>

          <!-- AUTOCOMPLETADO CATEGORÍAS -->
          <ng-container *ngIf="queryCategory; else elseCategory">
            <ion-item *ngFor="let suggestedCategory of suggestedCategories"
              (click)="addCategoryAnalysis(suggestedCategory)" style="cursor: pointer;" lines="full">
              <ion-label>{{suggestedCategory.name}}</ion-label>
            </ion-item>
            <ion-item *ngIf="suggestedCategories.length === 0">
              <ion-label>¿No existe la categoría?</ion-label>
              <ion-button [routerLink]="['/database/categories/create']" color="primary">
                Crear
              </ion-button>
            </ion-item>
          </ng-container>
          <ng-template #elseCategory>

          </ng-template>
          <!-- FIN DE AUTOCOMPLETADO CATEGORÍAS -->

          <ng-container class="ion-padding-top">
            <ion-chip color="primary" mode="ios" outline="true"
              *ngFor="let category of selectedCategories; let i = index" (click)="removeCategoryAnalysis(i)">
              <ion-label>{{category.name}}</ion-label>
              <ion-icon name="close-circle"></ion-icon>
            </ion-chip>
          </ng-container>

        </ion-col>

        <ion-col size="6" class="ion-margin-bottom">

          <ion-item>
            <ion-icon slot="start" name="pricetags" color="dark"></ion-icon>
            <ion-label>Filtrar por etiquetas</ion-label>
            <ion-input [(ngModel)]="queryLabel" (ionChange)="onLabelChange($event.detail.value)"></ion-input>
          </ion-item>

          <!-- AUTOCOMPLETADO ETIQUETAS -->
          <ng-container *ngIf="queryLabel; else elseLabel">
            <ion-item *ngFor="let suggestedLabel of suggestedLabels" (click)="addLabelAnalysis(suggestedLabel)"
              style="cursor: pointer;" lines="full">
              <ion-label>{{suggestedLabel.name}}</ion-label>
            </ion-item>
            <ion-item *ngIf="suggestedLabels.length === 0">
              <ion-label>¿No existe la etiqueta?</ion-label>
              <ion-button [routerLink]="['/database/labels/create']" color="primary">
                Crear
              </ion-button>
            </ion-item>
          </ng-container>
          <ng-template #elseLabel>

          </ng-template>
          <!-- FIN DE AUTOCOMPLETADO ETIQUETAS -->

          <ng-container class="ion-padding-top">
            <ion-chip color="primary" mode="ios" outline="true" *ngFor="let label of selectedLabels; let i = index"
              (click)="removeLabelAnalysis(i)">
              <ion-label>{{label.name}}</ion-label>
              <ion-icon name="close-circle"></ion-icon>
            </ion-chip>
          </ng-container>

        </ion-col>

        <!-- LISTADO DE ANÁLISIS CLÍNICOS SIN FILTRAR -->
        <ion-col size="12" *ngIf="!isFiltered()">
          <ng-container *ngFor="let study of analyticStudies" lines="full">
            <ng-container *ngIf="study.format && study.format == 'actualpacs'; else elseTemplate">
              <ion-item lines="none" color="primary">
                <ion-label>
                  <p *ngIf="study.testName"><b>{{study.testName}}</b></p>
                  <p><i>Fecha de realización: </i> <b>{{study.date | date: 'dd/MM/yy'}}</b></p>
                  <p *ngIf="study.accessionNumber"><i>Accession number: </i> <b>{{study.accessionNumber}}</b></p>
                  <p>
                    <span (click)="copyToClipboard(study.shortcode)" style="cursor: pointer;"><i>Shortcode: </i>
                      <b>{{study.shortcode}} </b>
                    </span>
                    <span style="cursor: pointer;" *ngIf="study.format && study.format == 'actualpacs'"><i>Procedencia:
                      </i>
                      <b>Actualpacs</b>
                    </span>
                    <ion-icon name="copy" style="
                        font-size: 18px;
                        position: relative;
                        top: 3px;
                        cursor: pointer;
                      ">
                    </ion-icon>
                  </p>
                </ion-label>
                <ion-buttons slot="end">
                  <ion-button (click)="deleteAnalyticStudy(study.id)" color="danger">
                    <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Eliminar':'Delete'}}</ion-label>
                    <ion-icon slot="start" name="trash"></ion-icon>
                  </ion-button>
                  <ion-button (click)="showEditAnalyticWithLimits(study.id)">
                    <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Editar':'Edit'}}</ion-label>
                    <ion-icon slot="start" name="create"></ion-icon>
                  </ion-button>
                </ion-buttons>
              </ion-item>

              <!-- VALORES POSITIVOS -->
              <div style="border-bottom: 1px solid lightgrey; background: white;" class="ion-padding ion-margin-bottom">
                <ng-container *ngFor="let element of study.values">
                  <ion-chip color="danger" mode="ios" outline="true"
                    *ngIf="element.status && element.status !=='normal'"
                    (click)="showAnalysisDescription(element.id, userData.isAdmin)">
                    <ion-label>{{element.name}}
                      <span *ngFor="let relatedDisease of element.relatedDiseases">({{relatedDisease}})</span>
                      <span></span>
                    </ion-label>
                    <ion-icon *ngIf="element.status ==='high'" name="trending-up"></ion-icon>
                    <ion-icon *ngIf="element.status ==='low'" name="trending-down"></ion-icon>
                  </ion-chip>
                </ng-container>
              </div>
            </ng-container>

            <ng-template #elseTemplate>
              <!-- ITEM -->
              <ion-item lines="none" color="primary">
                <ion-label>
                  <p *ngIf="study.testName"><b>{{study.testName}}</b></p>
                  <p><i>Fecha de realización: </i> <b>{{study.date | date: 'dd/MM/yy'}}</b></p>
                  <p *ngIf="study.accessionNumber"><i>Accession number: </i> <b>{{study.accessionNumber}}</b></p>
                  <p>
                    <span (click)="copyToClipboard(study.shortcode)" style="cursor: pointer;"><i>Shortcode: </i>
                      <b>{{study.shortcode}} </b>
                    </span>
                    <ion-icon name="copy" style="
                        font-size: 18px;
                        position: relative;
                        top: 3px;
                        cursor: pointer;
                      ">
                    </ion-icon>
                  </p>
                  <p *ngIf="study.filename"><i>Importado desde: </i> <b>{{study.filename}}</b></p>
                </ion-label>
                <ion-buttons slot="end">
                  <ion-button (click)="deleteAnalyticStudy(study.id)" color="danger">
                    <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Eliminar':'Delete'}}</ion-label>
                    <ion-icon slot="start" name="trash"></ion-icon>
                  </ion-button>
                  <ion-button (click)="showEditAnalytic(study.id)">
                    <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Editar':'Edit'}}</ion-label>
                    <ion-icon slot="start" name="create"></ion-icon>
                  </ion-button>
                </ion-buttons>
              </ion-item>

              <!-- VALORES POSITIVOS -->
              <div style="border-bottom: 1px solid lightgrey; background: white;" class="ion-padding ion-margin-bottom">
                <ng-container *ngFor="let element of study.values">
                  <ng-container *ngIf="element.meaning; else elseTemplate">
                    <ion-chip color="danger" mode="ios" outline="true"
                      *ngIf="element.meaning && element.meaning =='positive'"
                      (click)="showAnalysisDescription(element.id, userData.isAdmin)">
                      <ion-label>{{element.name}}: {{element.value ? element.value : ''}}
                        {{element.metricUnit ? element.metricUnit : element.ranges[0].UNIDAD}}
                        <span *ngFor="let relatedDisease of element.relatedDiseases">({{relatedDisease}})</span>
                        <span></span>
                      </ion-label>
                      <ion-icon *ngIf="element.status ==='high'" name="trending-up"></ion-icon>
                      <ion-icon *ngIf="element.status ==='low'" name="trending-down"></ion-icon>
                      <ion-icon *ngIf="element.status ==='normal'" name="code-download"></ion-icon>
                    </ion-chip>
                  </ng-container>
                  <ng-template #elseTemplate>
                    <ion-chip color="danger" mode="ios" outline="true"
                      *ngIf="element.status && element.status !=='normal'"
                      (click)="showAnalysisDescription(element.id, userData.isAdmin)">
                      <ion-label>{{element.name}}: {{element.value ? element.value : ''}}
                        {{element.metricUnit ? element.metricUnit : element.ranges[0].UNIDAD}}
                        <span *ngFor="let relatedDisease of element.relatedDiseases">({{relatedDisease}})</span>
                        <span></span>
                      </ion-label>
                      <ion-icon *ngIf="element.status ==='high'" name="trending-up"></ion-icon>
                      <ion-icon *ngIf="element.status ==='low'" name="trending-down"></ion-icon>
                    </ion-chip>
                  </ng-template>

                </ng-container>
              </div>
            </ng-template>

          </ng-container>
        </ion-col>

        <!-- FIN DE LISTADO DE ANÁLISIS CLÍNICOS -->

        <!-- LISTADO DE ANÁLISIS CLÍNICOS FILTRADOS -->

        <ion-col size="12" *ngIf="isFiltered()">
          <ng-container *ngFor="let study of analyticStudies" lines="full">
            <ng-container *ngIf="study.format && study.format == 'actualpacs'; else elseTemplate">
              <ion-item lines="none" color="primary">
                <ion-label>
                  <p *ngIf="study.testName"><b>{{study.testName}}</b></p>
                  <p><i>Fecha de realización: </i> <b>{{study.date | date: 'dd/MM/yy'}}</b></p>
                  <p *ngIf="study.accessionNumber"><i>Accession number: </i> <b>{{study.accessionNumber}}</b></p>
                  <p>
                    <span (click)="copyToClipboard(study.shortcode)" style="cursor: pointer;"><i>Shortcode: </i>
                      <b>{{study.shortcode}} </b>
                    </span>
                    <span style="cursor: pointer;" *ngIf="study.format && study.format == 'actualpacs'"><i>Procedencia:
                      </i>
                      <b>Actualpacs</b>
                    </span>
                    <ion-icon name="copy" style="
                        font-size: 18px;
                        position: relative;
                        top: 3px;
                        cursor: pointer;
                      ">
                    </ion-icon>
                  </p>
                </ion-label>
                <ion-buttons slot="end">
                  <ion-button (click)="deleteAnalyticStudy(study.id)" color="danger">
                    <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Eliminar':'Delete'}}</ion-label>
                    <ion-icon slot="start" name="trash"></ion-icon>
                  </ion-button>
                  <ion-button (click)="showEditAnalyticWithLimits(study.id)">
                    <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Editar':'Edit'}}</ion-label>
                    <ion-icon slot="start" name="create"></ion-icon>
                  </ion-button>
                </ion-buttons>
              </ion-item>

              <!-- VALORES POSITIVOS -->
              <div style="border-bottom: 1px solid lightgrey; background: white;" class="ion-padding ion-margin-bottom">
                <ng-container *ngFor="let element of study.values">
                  <ion-chip color="danger" mode="ios" outline="true"
                    *ngIf="element.status && element.status !=='normal' && element.relevant"
                    (click)="showAnalysisDescription(element.id, userData.isAdmin)">
                    <ion-label>{{element.name}}
                      <span *ngFor="let relatedDisease of element.relatedDiseases">({{relatedDisease}})</span>
                      <span></span>
                    </ion-label>
                    <ion-icon *ngIf="element.status ==='high'" name="trending-up"></ion-icon>
                    <ion-icon *ngIf="element.status ==='low'" name="trending-down"></ion-icon>
                  </ion-chip>
                </ng-container>
              </div>
            </ng-container>

            <ng-template #elseTemplate>
              <!-- ITEM -->
              <ion-item lines="none" color="primary">
                <ion-label>
                  <p *ngIf="study.testName"><b>{{study.testName}}</b></p>
                  <p><i>Fecha de realización: </i> <b>{{study.date | date: 'dd/MM/yy'}}</b></p>
                  <p *ngIf="study.accessionNumber"><i>Accession number: </i> <b>{{study.accessionNumber}}</b></p>
                  <p>
                    <span (click)="copyToClipboard(study.shortcode)" style="cursor: pointer;"><i>Shortcode: </i>
                      <b>{{study.shortcode}} </b>
                    </span>
                    <ion-icon name="copy" style="
                        font-size: 18px;
                        position: relative;
                        top: 3px;
                        cursor: pointer;
                      ">
                    </ion-icon>
                  </p>
                  <p *ngIf="study.filename"><i>Importado desde: </i> <b>{{study.filename}}</b></p>
                </ion-label>
                <ion-buttons slot="end">
                  <ion-button (click)="deleteAnalyticStudy(study.id)" color="danger">
                    <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Eliminar':'Delete'}}</ion-label>
                    <ion-icon slot="start" name="trash"></ion-icon>
                  </ion-button>
                  <ion-button (click)="showEditAnalytic(study.id)">
                    <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Editar':'Edit'}}</ion-label>
                    <ion-icon slot="start" name="create"></ion-icon>
                  </ion-button>
                </ion-buttons>
              </ion-item>

              <!-- VALORES POSITIVOS -->
              <div style="border-bottom: 1px solid lightgrey; background: white;" class="ion-padding ion-margin-bottom">
                <ng-container *ngFor="let element of study.values">
                  <ng-container *ngIf="element.meaning; else elseTemplate">
                    <ion-chip color="danger" mode="ios" outline="true"
                      *ngIf="element.meaning && element.meaning =='positive' && element.relevant"
                      (click)="showAnalysisDescription(element.id, userData.isAdmin)">
                      <ion-label>{{element.name}}: {{element.value ? element.value : ''}}
                        {{element.metricUnit ? element.metricUnit : element.ranges[0].UNIDAD}}
                        <span *ngFor="let relatedDisease of element.relatedDiseases">({{relatedDisease}})</span>
                        <span></span>
                      </ion-label>
                      <ion-icon *ngIf="element.status ==='high'" name="trending-up"></ion-icon>
                      <ion-icon *ngIf="element.status ==='low'" name="trending-down"></ion-icon>
                      <ion-icon *ngIf="element.status ==='normal'" name="code-download"></ion-icon>
                    </ion-chip>
                  </ng-container>
                  <ng-template #elseTemplate>
                    <ion-chip color="danger" mode="ios" outline="true"
                      *ngIf="element.status && element.status !=='normal' && element.relevant"
                      (click)="showAnalysisDescription(element.id, userData.isAdmin)">
                      <ion-label>{{element.name}}: {{element.value ? element.value : ''}}
                        {{element.metricUnit ? element.metricUnit : element.ranges[0].UNIDAD}}
                        <span *ngFor="let relatedDisease of element.relatedDiseases">({{relatedDisease}})</span>
                        <span></span>
                      </ion-label>
                      <ion-icon *ngIf="element.status ==='high'" name="trending-up"></ion-icon>
                      <ion-icon *ngIf="element.status ==='low'" name="trending-down"></ion-icon>
                    </ion-chip>
                  </ng-template>

                </ng-container>
              </div>
            </ng-template>

          </ng-container>
        </ion-col>
        <!-- LISTADO FILTRADO -->

      </ng-container>
    </ion-row>
    <!-- FIN DE ESTUDIO ANALÍTICO -->

    <!-- ESTUDIO DE IMAGEN -->
    <ng-container *ngIf="!imageAccess">
      <ion-row *ngSwitchCase="'image-study'" class="ion-padding-vertical">
        <ion-col size="4">
          <ion-item>
            <ion-label position="floating">Iniciales del paciente</ion-label>
            <ion-input placeholder="Introduzca iniciales" [(ngModel)]="inicialesDelSujeto"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col size="4">
          <ion-item>
            <ion-label position="floating">ID paciente</ion-label>
            <ion-input placeholder="Introduzca ID" [(ngModel)]="actualpacsId"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col size="4">
          <ion-item>
            <ion-label position="floating">Centro referente</ion-label>
            <ion-input placeholder="Introduzca centro referente" [(ngModel)]="centroReferente"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col size="12">
          <ion-button (click)="showAddImage()" expand="full" color="secondary">
            <ion-icon slot="start" name="add"></ion-icon>
            <ion-label *ngIf="lang.isSpanish()">Crear prueba de imagen</ion-label>
            <ion-label *ngIf="!lang.isSpanish()">Create image test</ion-label>
          </ion-button>
        </ion-col>

        <ion-col size="6">

          <ion-item>
            <ion-icon slot="start" name="folder" color="dark"></ion-icon>
            <ion-label>Filtrar por categorías</ion-label>
            <ion-input [(ngModel)]="queryCategory" (ionChange)="onCategoryChange($event.detail.value)"></ion-input>
          </ion-item>

          <!-- AUTOCOMPLETADO -->
          <ng-container *ngIf="queryCategory; else elseCategory">
            <ion-item *ngFor="let suggestedCategory of suggestedCategories" (click)="addCategory(suggestedCategory)"
              style="cursor: pointer;" lines="full">
              <ion-label>{{suggestedCategory.name}}</ion-label>
            </ion-item>
            <ion-item *ngIf="suggestedCategories.length === 0">
              <ion-label>¿No existe la categoría?</ion-label>
              <ion-button [routerLink]="['/database/categories/create']" color="primary">
                Crear
              </ion-button>
            </ion-item>
          </ng-container>
          <ng-template #elseCategory>

          </ng-template>
          <!-- FIN DE AUTOCOMPLETADO -->

          <ng-container class="ion-padding-top">
            <ion-chip color="primary" mode="ios" outline="true"
              *ngFor="let category of selectedCategories; let i = index" (click)="removeCategory(i)">
              <ion-label>{{category.name}}</ion-label>
              <ion-icon name="close-circle"></ion-icon>
            </ion-chip>
          </ng-container>

        </ion-col>

        <ion-col size="6">

          <ion-item>
            <ion-icon slot="start" name="pricetags" color="dark"></ion-icon>
            <ion-label>Filtrar por etiquetas</ion-label>
            <ion-input [(ngModel)]="queryLabel" (ionChange)="onLabelChange($event.detail.value)"></ion-input>
          </ion-item>

          <!-- AUTOCOMPLETADO -->
          <ng-container *ngIf="queryLabel; else elseLabel">
            <ion-item *ngFor="let suggestedLabel of suggestedLabels" (click)="addLabel(suggestedLabel)"
              style="cursor: pointer;" lines="full">
              <ion-label>{{suggestedLabel.name}}</ion-label>
            </ion-item>
            <ion-item *ngIf="suggestedLabels.length === 0">
              <ion-label>¿No existe la etiqueta?</ion-label>
              <ion-button [routerLink]="['/database/labels/create']" color="primary">
                Crear
              </ion-button>
            </ion-item>
          </ng-container>
          <ng-template #elseLabel>

          </ng-template>
          <!-- FIN DE AUTOCOMPLETADO -->

          <ng-container class="ion-padding-top">
            <ion-chip color="primary" mode="ios" outline="true" *ngFor="let label of selectedLabels; let i = index"
              (click)="removeLabel(i)">
              <ion-label>{{label.name}}</ion-label>
              <ion-icon name="close-circle"></ion-icon>
            </ion-chip>
          </ng-container>

        </ion-col>

        <!--  
        <ion-col size="6">
          <ion-item>
            <ion-icon slot="start" name="albums" color="dark"></ion-icon>
            <ion-label>Filtrar por AETitle</ion-label>
            <ion-input (ionChange)="onAETitleChange($event.detail.value)"></ion-input>
          </ion-item>
        </ion-col>
        -->

        <!-- INPUT DE CREACION DE CONJUNTOS DE PRUEBAS -->
        <ion-col size="12" class="ion-margin-top">
          <ion-item>
            <ion-label position="floating">Crear contenedor</ion-label>
            <ion-input placeholder="Introduzca nombre" [(ngModel)]="containerName"></ion-input>
            <ion-buttons slot="end" style="margin-top: 0.80rem;">
              <ion-button (click)="createContainer()" color="secondary">
                <ion-icon slot="start" name="add"></ion-icon>
                Crear contenedor de pruebas
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>

        <ion-col size="12">
          <!-- CONTENTEDORES   -->
          <div *ngFor="let container of imageTestsContainers" class="image-container">
            {{container.name}}
            <ion-row class="ion-margin-top" *ngIf="container.tests && container.tests.length>0">
              <!-- LISTADO DE PRUEBAS DENTRO DE CONTENEDOR -->
              <ion-col size="12" *ngFor="let imageTest of imageTests ; let i = index" class="ion-padding-top">
                <ion-item color="primary" lines="none"
                  *ngIf="container.tests && container.tests.includes(imageTest.id)">
                  <ion-label class="ion-text-wrap">
                    <p style="font-size: 18px; margin-bottom: 0.5rem;">
                      {{ imageTest.name }}
                      <ion-icon color="success" *ngIf="imageTest.format" name="checkmark-circle"></ion-icon>
                      <ion-icon color="danger" *ngIf="!imageTest.format" name="close-circle"></ion-icon>
                      <ion-icon color="danger" *ngIf="imageTest.isReproductionTest" name="male-female"></ion-icon>
                    </p>
                    <p>
                      Fecha de realización: {{ imageTest.date | date: 'dd/MM/yy' }}
                    </p>
                    <p>Accession number: {{imageTest.accessionNumber}}</p>
                    <p *ngIf="imageTest.AETitle">AETitle: {{imageTest.AETitle}}</p>
                    <p>
                      <span (click)="copyToClipboard(imageTest.shortcode)" style="cursor: pointer;">Shortcode:
                        {{ imageTest.shortcode }}
                      </span>
                      <ion-icon name="copy" style="
                          font-size: 16px;
                          position: relative;
                          top: 3px;
                          cursor: pointer;
                        ">
                      </ion-icon>
                    </p>
                  </ion-label>
                  <ion-buttons slot="end">
                    <ion-button (click)="extractImageTest(container.id, imageTest.id)" color="danger">
                      <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Extraer':'Extract'}}</ion-label>
                      <ion-icon slot="start" name="arrow-undo"></ion-icon>
                    </ion-button>
                    <ion-button (click)="openQuibim(imageTest.id)">
                      <ion-img src="assets/images/quibim-logo.png" style="max-width: 16px; margin-right: 0.5rem;">
                      </ion-img>
                      <ion-label class="ion-hide-sm-down">Quibim</ion-label>
                    </ion-button>
                    <ion-button (click)="openReports(imageTest)">
                      <ion-label class="ion-hide-sm-down">PDF</ion-label>
                      <ion-icon slot="start" name="document"></ion-icon>
                    </ion-button>
                    <ion-button (click)="showImageTest(imageTest.id)">
                      <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Editar':'Edit'}}</ion-label>
                      <ion-icon slot="start" name="create"></ion-icon>
                    </ion-button>
                  </ion-buttons>
                </ion-item>
                <div
                  style="border-bottom: 1px solid lightgrey; background: white; border-left: 1px solid lightgrey; border-right: 1px solid lightgrey;"
                  class="ion-padding"
                  *ngIf="container.tests && container.tests.includes(imageTest.id) && imageTest.status==='positive'">
                  <ng-container *ngFor="let element of imageTest.values">
                    <ion-chip color="danger" mode="ios" outline="true"
                      *ngIf="element.status && element.status === 'positive'">
                      <ion-label>{{element.name}}:
                        <span>{{element.value}}</span>
                      </ion-label>
                    </ion-chip>
                  </ng-container>
                </div>
                <div
                  style="border-bottom: 1px solid lightgrey; background: white; border-left: 1px solid lightgrey; border-right: 1px solid lightgrey;"
                  class="ion-padding"
                  *ngIf="container.tests && container.tests.includes(imageTest.id) && imageTest.status==='negative'">
                  {{lang.isSpanish()?'Sin hallazgos destacados':'No relevant
                  findings'}}
                </div>
              </ion-col>
            </ion-row>
            <ion-item lines="none" class="ion-margin-top">
              <ion-buttons slot="end">
                <ion-button (click)="deleteContainer(container)" color="danger">
                  <ion-icon slot="start" name="trash"></ion-icon>
                  Eliminar contenedor
                </ion-button>
              </ion-buttons>
            </ion-item>
          </div>
        </ion-col>

        <!-- LISTADO DE PRUEBAS DE IMAGEN DEL SUJETO (INDEPENDIENTES) -->
        <ion-col size="12" *ngFor="let imageTest of imageTests ; let i = index" class="ion-padding-top">
          <ion-item color="primary" lines="none" *ngIf="!imageTest.isContained">
            <ion-label class="ion-text-wrap">
              <p style="font-size: 18px; margin-bottom: 0.5rem;">
                {{ imageTest.name }}
                <ion-icon color="success" *ngIf="imageTest.format" name="checkmark-circle"></ion-icon>
                <ion-icon color="danger" *ngIf="!imageTest.format" name="close-circle"></ion-icon>
                <ion-icon color="danger" *ngIf="imageTest.isReproductionTest" name="male-female"></ion-icon>
              </p>
              <p>
                Fecha de realización: {{ imageTest.date | date: 'dd/MM/yy' }}
              </p>
              <p>Accession number: {{imageTest.accessionNumber}}</p>
              <p *ngIf="imageTest.AETitle">AETitle: {{imageTest.AETitle}}</p>
              <p>
                <span (click)="copyToClipboard(imageTest.shortcode)" style="cursor: pointer;">Shortcode:
                  {{ imageTest.shortcode }}
                </span>
                <ion-icon name="copy" style="
                    font-size: 16px;
                    position: relative;
                    top: 3px;
                    cursor: pointer;
                  ">
                </ion-icon>
              </p>
            </ion-label>
            <ion-buttons slot="end">
              <!-- <ion-button (click)="addImage(i)">
                <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Añadir imagen':'Add image'}}
                </ion-label>
                <ion-icon slot="start" name="add"></ion-icon>
              </ion-button>
              <ion-button (click)="showGallery(i)">
                <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Ver imágenes':'Show images'}}
                </ion-label>
                <ion-icon slot="start" name="eye"></ion-icon>
              </ion-button> -->
              <ion-button (click)="deleteImageTest(i)" color="danger">
                <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Eliminar':'Delete'}}</ion-label>
                <ion-icon slot="start" name="trash"></ion-icon>
              </ion-button>
              <ion-button (click)="openQuibim(imageTest.id)">
                <ion-img src="assets/images/quibim-logo.png" style="max-width: 16px; margin-right: 0.5rem;"></ion-img>
                <ion-label class="ion-hide-sm-down">Quibim</ion-label>
              </ion-button>
              <ion-button (click)="openReports(imageTest)">
                <ion-label class="ion-hide-sm-down">PDF</ion-label>
                <ion-icon slot="start" name="document"></ion-icon>
              </ion-button>
              <ion-button (click)="showImageTest(imageTest.id)">
                <ion-label class="ion-hide-sm-down">{{lang.isSpanish()?'Editar':'Edit'}}</ion-label>
                <ion-icon slot="start" name="create"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
          <div style="border-bottom: 1px solid lightgrey; background: white;" class="ion-padding"
            *ngIf="!imageTest.isContained && imageTest.status==='positive'">
            <ng-container *ngFor="let element of imageTest.values">
              <ion-chip color="danger" mode="ios" outline="true"
                *ngIf="element.status && element.status === 'positive'">
                <ion-label>{{element.name}}:
                  <span>{{element.value}}</span>
                </ion-label>
              </ion-chip>
            </ng-container>
          </div>
          <div style="border-bottom: 1px solid lightgrey; background: white;" class="ion-padding"
            *ngIf="!imageTest.isContained && imageTest.status==='negative'">
            {{lang.isSpanish()?'Sin hallazgos destacados':'No relevant
            findings'}}
          </div>
          <ion-item *ngIf="!imageTest.isContained && imageTestsContainers && imageTestsContainers.length > 0">
            <ion-label>Insertar dentro de contenedor</ion-label>
            <ion-select value="none" multiple="false" placeholder="Seleccione contenedor"
              (ionChange)="insertImageTest(imageTest.id, $event.detail.value)">
              <ion-select-option value="none">Ninguna</ion-select-option>
              <ion-select-option [value]="container.id" *ngFor="let container of imageTestsContainers">
                {{container.name}}
              </ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>
      </ion-row>
    </ng-container>
  </ion-grid>
</ion-content>